#!/bin/bash

if [[ $# -eq 0 ]] ; then
    echo 'This file supports composer commands, it should not be run directly.'
    exit 0
fi

command=$1
shift
path="$(cd "$(dirname "$1")"; pwd)/$(basename "$1")"
echo $path
shift
restofcommands=$@

docker compose run --rm -u $(id -u):$(id -g) -v "$path:/var/test" php ./vendor/bin/$command -v --standard=./src/ruleset.xml ../test $restofcommands
